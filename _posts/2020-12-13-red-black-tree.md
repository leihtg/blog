---
layout: post
title: 红黑树
categories: 数据结构
tags: 数据结构
author: leihtg

---

* content
{:toc}

#### **红黑树的性质**：  

1. 根结点和所有外部结点都是黑色的。
2. 在根至外部节点路径上，没有连续两个节点是红色的。
3. 在所有根至外部节点的路径上，黑色节点的数目都相同。

#### **红黑树的插入**

插入的新节点如果是黑色的肯定违反规则3，如果新节点为红色的可能违反规则2，也可能不违反，因此新节点设置为红点的。

如果插入新节点破坏了规则2，我们就说树的平衡被破坏了。不平衡的类型可以通过检查新节点u、其父节点pu及祖父节点gu来确定。
规则2被破坏后的情况便是有两个连续的红色节点：一个是u、另一个一定是它的父节点，因此pu存在。因为pu是红色的，它不可能是根（根据规则1），
所以u必定有一个祖父节点gu，并且是黑色的（根据规则2）。

当pu是gu的左孩子，u是pu的左孩子且gu的另一个孩子是黑色时（这另一个孩子可以是外部节点），我们称该不平衡是LLb类型。其他的不平衡类型是
LLr、LRb、LRr、RRr、RRb、RLr、RLb。

XYr(X和Y既可以是L，也可以是R)类型的不平衡可以通过改变颜色来处理，而XXb类型则需要旋转。

LLr和LRr颜色调整需要将pu和gu的右孩子由红色改为黑色。另外，如果gu不是根，还要将gu的颜色由黑色改为红色。如果gu是根节点，那么颜色不变，这时，
所有从根至外部节点路径上的黑色节点数量都增加1。
如果将gu的颜色改为红色而了不平衡，那么gu就变成了新的u节点，它的双亲就变成了新的pu，它的祖父节点就变成了新的gu，这时需要继续恢复平衡。
如果gu是根节点或者gu节点的颜色改变没有违反规则2，那么工作就完成了。

LLb和LRb不平衡时就需要做旋转，例如，在LLb旋转中，不仅要改指针，还要将gu的颜色由黑色改为红色，将pu的颜色由红色改为黑色。

